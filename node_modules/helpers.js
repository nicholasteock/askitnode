// helpers.js

var mysql = require('mysql');

(function() {
    // Default params
	var connection_params = {
		host: 'askitdb.cvumcgqvkpk0.us-west-2.rds.amazonaws.com',
		user: 'nicholasteo',
		password: 'nicholasteo',
		database: 'askitdb',
		port: 3306
	};

	// Query function
	var make_query = function( query ) {
		var connection = mysql.createConnection(connection_params);
		var res = {};

		connection.connect();

		connection.query(query, function(err, rows) {
			if(err) {
				res.result = "failure";
			}

			res.result = "success";
			res.data = rows;
		});

		connection.end();
		return res;
	}

    module.exports.make_query = function() {
        return make_query();
    }

}());